<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Heterogeneity</title>
    <meta charset="utf-8" />
    <meta name="author" content="John Paul Helveston" />
    <meta name="date" content="2022-11-16" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/tile-view/tile-view.css" rel="stylesheet" />
    <script src="libs/tile-view/tile-view.js"></script>
    <link href="libs/panelset/panelset.css" rel="stylesheet" />
    <script src="libs/panelset/panelset.js"></script>
    <script src="libs/clipboard/clipboard.min.js"></script>
    <link href="libs/xaringanExtra-clipboard/xaringanExtra-clipboard.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-clipboard/xaringanExtra-clipboard.js"></script>
    <script>window.xaringanExtraClipboard(null, {"button":"Copy Code","success":"Copied!","error":"Press Ctrl+C to Copy"})</script>
    <link href="libs/shareon/shareon.min.css" rel="stylesheet" />
    <script src="libs/shareon/shareon.min.js"></script>
    <link href="libs/xaringanExtra-shareagain/shareagain.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-shareagain/shareagain.js"></script>
    <link href="libs/xaringanExtra-extra-styles/xaringanExtra-extra-styles.css" rel="stylesheet" />
    <meta name="description" content="EMSE 6035: Marketing Analytics for Design Decisions"/>
    <meta name="generator" content="xaringan and remark.js"/>
    <meta name="github-repo" content="emse-madd-gwu/2022-Fall"/>
    <meta name="twitter:title" content="Heterogeneity"/>
    <meta name="twitter:description" content="EMSE 6035: Marketing Analytics for Design Decisions"/>
    <meta name="twitter:url" content="https://madd.seas.gwu.edu/2022-Fall/"/>
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:creator" content="@johnhelveston"/>
    <meta name="twitter:site" content="@johnhelveston"/>
    <meta property="og:title" content="Heterogeneity"/>
    <meta property="og:description" content="EMSE 6035: Marketing Analytics for Design Decisions"/>
    <meta property="og:url" content="https://madd.seas.gwu.edu/2022-Fall/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:locale" content="en_US"/>
    <meta property="article:author" content="John Paul Helveston"/>
    <link href="libs/countdown/countdown.css" rel="stylesheet" />
    <script src="libs/countdown/countdown.js"></script>
    <link rel="stylesheet" href="css/lexis.css" type="text/css" />
    <link rel="stylesheet" href="css/lexis-fonts.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">




class: middle, inverse

.leftcol30[

&lt;center&gt;
&lt;img src="https://github.com/emse-madd-gwu/emse-madd-gwu.github.io/raw/master/images/logo.png" width=250&gt;
&lt;/center&gt;

]

.rightcol70[

# Week 12: .fancy[Heterogeneity]

### <svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:white;overflow:visible;position:relative;"><path d="M243.4 2.6l-224 96c-14 6-21.8 21-18.7 35.8S16.8 160 32 160v8c0 13.3 10.7 24 24 24H456c13.3 0 24-10.7 24-24v-8c15.2 0 28.3-10.7 31.3-25.6s-4.8-29.9-18.7-35.8l-224-96c-8.1-3.4-17.2-3.4-25.2 0zM128 224H64V420.3c-.6 .3-1.2 .7-1.8 1.1l-48 32c-11.7 7.8-17 22.4-12.9 35.9S17.9 512 32 512H480c14.1 0 26.5-9.2 30.6-22.7s-1.1-28.1-12.9-35.9l-48-32c-.6-.4-1.2-.7-1.8-1.1V224H384V416H344V224H280V416H232V224H168V416H128V224zm128-96c-17.7 0-32-14.3-32-32s14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32z"/></svg> EMSE 6035: Marketing Analytics for Design Decisions
### <svg aria-hidden="true" role="img" viewBox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:white;overflow:visible;position:relative;"><path d="M272 304h-96C78.8 304 0 382.8 0 480c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32C448 382.8 369.2 304 272 304zM48.99 464C56.89 400.9 110.8 352 176 352h96c65.16 0 119.1 48.95 127 112H48.99zM224 256c70.69 0 128-57.31 128-128c0-70.69-57.31-128-128-128S96 57.31 96 128C96 198.7 153.3 256 224 256zM224 48c44.11 0 80 35.89 80 80c0 44.11-35.89 80-80 80S144 172.1 144 128C144 83.89 179.9 48 224 48z"/></svg> John Paul Helveston
### <svg aria-hidden="true" role="img" viewBox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:white;overflow:visible;position:relative;"><path d="M152 64H296V24C296 10.75 306.7 0 320 0C333.3 0 344 10.75 344 24V64H384C419.3 64 448 92.65 448 128V448C448 483.3 419.3 512 384 512H64C28.65 512 0 483.3 0 448V128C0 92.65 28.65 64 64 64H104V24C104 10.75 114.7 0 128 0C141.3 0 152 10.75 152 24V64zM48 448C48 456.8 55.16 464 64 464H384C392.8 464 400 456.8 400 448V192H48V448z"/></svg> November 16, 2022

]

---

# Houskeeping items 

- **Final presentations** will be on 12/14 during normal class hours. You can pre-record a video presentation if you want, or you can do it live.

--

- **Final reports** (due 12/11) will also be an html page report. 

--

- I am planning on posting all reports (without grades) to the course site as a showcase for future students - **please DM me if you would NOT like your report posted**. ([examples](https://madd.seas.gwu.edu/showcase-2021-fall.html) from last year)

---

class: inverse

# Quiz 5 - last one!

<div class="countdown" id="timer_637402c5" style="bottom:0;left:0;font-size:4em;" data-warnwhen="30">
<code class="countdown-time"><span class="countdown-digits minutes">10</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

.leftcol[

### Link is in the #class channel

]

.rightcol[

&lt;center&gt;
&lt;img src="https://github.com/emse-p4a-gwu/2022-Spring/raw/main/images/quiz_doge.png" width="400"&gt;
&lt;/center&gt;

]

---



class: inverse, middle

# Week 12: .fancy[Heterogeneity]

### 1. Mixed logit (unobserved heterogeneity)
### 2. Sub-group modeling (observed heterogeneity)

---



class: inverse, middle

# Week 12: .fancy[Heterogeneity]

### 1. .orange[Mixed logit (unobserved heterogeneity)]
### 2. Sub-group modeling (observed heterogeneity)

---

background-color: #EEEDEE
class: center

# Two ways of modeling heterogeneity 

.leftcol[

.red["Observed Heterogeneity"]

]

.rightcol[

.red["Unobserved Heterogeneity"]

]

&lt;center&gt;
&lt;img src="images/heterogeneity.png" width=1000&gt;
&lt;/center&gt;

---

background-color: #EEEDEE

## .center[Mixed logit]

### Preference parameters follow a distribution&lt;br&gt;**across sample population**

.leftcol[

&lt;center&gt;
&lt;img src="images/mixed_par.png" width=500&gt;
&lt;/center&gt;

]

.rightcol[

## `$$\tilde{u}_j = \beta_1 x_j + \varepsilon_j$$`

## `$$\beta_1 \sim \mathrm{N} (\mu_1, \sigma_1)$$`

Parameter | Estimate | Standard Error 
----------|----------|-----------------
`\(\mu_1\)`   | 0.1      | 0.01
`\(\sigma_1\)` | 0.1      | 0.01

]

---

## Which distribution should I use? 

.cols3[

**Normal distribution**

When preferences can be positive or negative

e.g. `brand = "n"`

&lt;img src="figs/unnamed-chunk-4-1.png" width="522.144" /&gt;

]

--

.cols3[

**Log-normal distribution**

When preferences should be strictly positive

e.g. `-1*price = "ln"`

&lt;img src="figs/unnamed-chunk-5-1.png" width="522.144" /&gt;

]

--

.cols3[

**Fixed parameter**

When preferences appear to be homogeneous 

(e.g. `\(\sigma\)` is very small)

&lt;img src="figs/unnamed-chunk-6-1.png" width="522.144" /&gt;

]

---

class: center

### Mixed logits are not equivalent in Preference vs. WTP space

.leftcol[

### Preference space

### `$$\tilde{u}_j = \alpha p_j + \beta x_j + \varepsilon_j$$`

### `$$\alpha \sim \ln\mathrm{N} (\mu_1, \sigma_1)$$`

### `$$\beta \sim \mathrm{N} (\mu_2, \sigma_2)$$`

]

---

class: center

### Mixed logits are not equivalent in Preference vs. WTP space

.leftcol[

### Preference space

### `$$\tilde{u}_j = \alpha p_j + \beta x_j + \varepsilon_j$$`

### `$$\alpha \sim \ln\mathrm{N} (\mu_1, \sigma_1)$$`

### `$$\beta \sim \mathrm{N} (\mu_2, \sigma_2)$$`

### `$$\omega = \frac{\beta}{-\alpha} = \frac{\mathrm{N} (\mu_2, \sigma_2)}{- \ln\mathrm{N} (\mu_1, \sigma_1)}$$`

]

--

.rightcol[

### WTP space

### `$$\tilde{u}_j = \lambda(\omega_1 x_j - p_j) + \varepsilon_j$$`

### `$$\omega_1 \sim \mathrm{N} (\mu_1, \sigma_1)$$`

]

---

class: inverse

# Practice Question 3

a) Use the `logitr` package to estimate the following homogeneous model:

$$
\tilde{u}_j = \beta_1 x_j^{\mathrm{price}} + \beta_2 \delta_j^{\mathrm{feat}} + \beta_3 \delta_j^{\mathrm{dannon}} + \beta_4 \delta_j^{\mathrm{hiland}} + 
\beta_5 \delta_j^{\mathrm{weight}} + \varepsilon_j
$$

where the three `\(\delta\)` coefficients are dummy variables for Dannon, Hiland, and Weight Watchers brands (Yoplait is the reference level).

b) Use the `logitr` package to estimate the same model but with the following mixing distributions:

- `\(\beta_1 \sim \mathrm{N} (\mu_1, \sigma_1)\)`
- `\(\beta_2 \sim \mathrm{N} (\mu_2, \sigma_2)\)`

---

# .center[Estimating mixed logit models with `logitr`]

&lt;br&gt;

.rightcol80[

## 1. Open `logitr-cars`

## 2. Open `code/8.1-model-mxl.R`

]

---

class: inverse

<div class="countdown" id="timer_637404ea" style="top:0;right:0;font-size:2em;" data-warnwhen="15">
<code class="countdown-time"><span class="countdown-digits minutes">10</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

## Your Turn

.leftcol80[.font120[

As a team, re-estimate the main model you used in your pilot analysis report, but now using a mixed logit model.

Carefully consider which distributions to use (i.e., normal or log-normal) for different variables.

]]

---



class: inverse, middle

# Week 12: .fancy[Heterogeneity]

### 1. Mixed logit (unobserved heterogeneity)
### 2. .orange[Sub-group modeling (observed heterogeneity)]

---

class: center

# Two ways of modeling heterogeneity 

.leftcol[

.red["Observed Heterogeneity"]

]

.rightcol[

.red["Unobserved Heterogeneity"]

]

&lt;center&gt;
&lt;img src="images/heterogeneity.png" width=1000&gt;
&lt;/center&gt;

---

class: middle

### .center[Use interactions to model preferences for multiple groups]

.leftcol[

### Homogenous model: 

### `\(\tilde{u}_j = \beta_1 x_j + \varepsilon_j\)`

### Two groups: A &amp; B

### `\(\tilde{u}_j = \beta_1 x_j + \beta_2 x_j \delta^\mathrm{B} + \varepsilon_j\)`

### `\(\quad = (\beta_1 + \beta_2 \delta^\mathrm{B}) x_j + \varepsilon_j\)`

]

.rightcol[

Par.| Meaning 
----|--------
`\(\beta_1\)` | Effect of `\(x_j\)` for group A
`\(\beta_2\)` | _Difference_ in effect of `\(x_j\)` between groups

]

---

class: center 

# What's the difference?

.leftcol[

## Separate models <svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M175 175C184.4 165.7 199.6 165.7 208.1 175L255.1 222.1L303 175C312.4 165.7 327.6 165.7 336.1 175C346.3 184.4 346.3 199.6 336.1 208.1L289.9 255.1L336.1 303C346.3 312.4 346.3 327.6 336.1 336.1C327.6 346.3 312.4 346.3 303 336.1L255.1 289.9L208.1 336.1C199.6 346.3 184.4 346.3 175 336.1C165.7 327.6 165.7 312.4 175 303L222.1 255.1L175 208.1C165.7 199.6 165.7 184.4 175 175V175zM512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256zM256 48C141.1 48 48 141.1 48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48z"/></svg>

$$
\tilde{u}_j^\mathrm{A} = \beta_1^\mathrm{A} x_j + \varepsilon_j^\mathrm{A}
$$

$$
\tilde{u}_j^\mathrm{B} = \beta_1^\mathrm{B} x_j + \varepsilon_j^\mathrm{B}
$$

]

.rightcol[

## Single model <svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:green;overflow:visible;position:relative;"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"/></svg>

`$$\tilde{u}_j = \beta_1 x_j + \beta_2 x_j \delta^\mathrm{B} + \varepsilon_j$$`

]

---

# .center[Accounting for scale differences]

.leftcol[

## .center[Separate models <svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M175 175C184.4 165.7 199.6 165.7 208.1 175L255.1 222.1L303 175C312.4 165.7 327.6 165.7 336.1 175C346.3 184.4 346.3 199.6 336.1 208.1L289.9 255.1L336.1 303C346.3 312.4 346.3 327.6 336.1 336.1C327.6 346.3 312.4 346.3 303 336.1L255.1 289.9L208.1 336.1C199.6 346.3 184.4 346.3 175 336.1C165.7 327.6 165.7 312.4 175 303L222.1 255.1L175 208.1C165.7 199.6 165.7 184.4 175 175V175zM512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256zM256 48C141.1 48 48 141.1 48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48z"/></svg>]

$$
\tilde{u}_j^\mathrm{A} = \alpha^\mathrm{A} p_j + \beta_1^\mathrm{A} x_j + \varepsilon_j^\mathrm{A}
$$

$$
\tilde{u}_j^\mathrm{B} = \alpha^\mathrm{B} p_j + \beta_1^\mathrm{B} x_j + \varepsilon_j^\mathrm{B}
$$

Imagine you got the following results 

- `\(\hat{\alpha}^\mathrm{A}\)` = 100
- `\(\hat{\beta}^\mathrm{A}\)` = 200
- `\(\hat{\alpha}^\mathrm{B}\)` = 1
- `\(\hat{\beta}^\mathrm{B}\)` = 2

]

--

.rightcol[

## .center[Single model <svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:green;overflow:visible;position:relative;"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"/></svg>]

`$$\tilde{u}_j = \alpha_1 p_j + \alpha_2 p_j \delta^\mathrm{B} + \beta_1 x_j + \beta_2 x_j \delta^\mathrm{B} + \varepsilon_j$$`

`$$\quad = (\alpha_1 + \alpha_2 \delta^\mathrm{B}) p_j + (\beta_1 + \beta_2 \delta^\mathrm{B}) x_j + \varepsilon_j$$`

]

---

# .center[Accounting for scale differences]

.leftcol[

## .center[Preference Space <svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M175 175C184.4 165.7 199.6 165.7 208.1 175L255.1 222.1L303 175C312.4 165.7 327.6 165.7 336.1 175C346.3 184.4 346.3 199.6 336.1 208.1L289.9 255.1L336.1 303C346.3 312.4 346.3 327.6 336.1 336.1C327.6 346.3 312.4 346.3 303 336.1L255.1 289.9L208.1 336.1C199.6 346.3 184.4 346.3 175 336.1C165.7 327.6 165.7 312.4 175 303L222.1 255.1L175 208.1C165.7 199.6 165.7 184.4 175 175V175zM512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256zM256 48C141.1 48 48 141.1 48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48z"/></svg>]

$$
\tilde{u}_j^\mathrm{A} = \alpha^\mathrm{A} p_j + \beta_1^\mathrm{A} x_j + \varepsilon_j^\mathrm{A}
$$

$$
\tilde{u}_j^\mathrm{B} = \alpha^\mathrm{B} p_j + \beta_1^\mathrm{B} x_j + \varepsilon_j^\mathrm{B}
$$

Imagine you got the following results 

- `\(\hat{\alpha}^\mathrm{A}\)` = 100
- `\(\hat{\beta}^\mathrm{A}\)` = 200
- `\(\hat{\alpha}^\mathrm{B}\)` = 1
- `\(\hat{\beta}^\mathrm{B}\)` = 2

]

--

.rightcol[

## .center[WTP Space <svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:green;overflow:visible;position:relative;"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"/></svg>]

$$
\tilde{u}_j^\mathrm{A} = \lambda^\mathrm{A}(\omega_1^\mathrm{A} x_j - p) + \varepsilon_j^\mathrm{A}
$$

$$
\tilde{u}_j^\mathrm{B} = \lambda^\mathrm{B}(\omega_1^\mathrm{B} x_j - p) + \varepsilon_j^\mathrm{B}
$$

$$
\omega = \frac{\beta}{- \alpha}
$$

- `\(\hat{\omega}^\mathrm{A} = 200 / (-100) = -2\)`
- `\(\hat{\omega}^\mathrm{B} = 2 / (-1) = -2\)`

]

---

class: inverse

# Practice Question 1

Suppose we estimate the following utility model describing preferences for cars:

$$
\tilde{u}_j = \beta_1 x_j^{\mathrm{price}} + \beta_2 x_j^{\mathrm{mpg}} + \beta_3 x_j^{\mathrm{elec}} + \varepsilon_j
$$

a) Using interactions, write out a model that accounts for differences in the effects of `\(x_j^{\mathrm{price}}\)`, `\(x_j^{\mathrm{mpg}}\)`, and `\(x_j^{\mathrm{elec}}\)` between two groups: A and B.

b) Write out the effects of `\(x_j^{\mathrm{price}}\)`, `\(x_j^{\mathrm{mpg}}\)`, and `\(x_j^{\mathrm{elec}}\)` for each group.

---

class: inverse

# Practice Question 2

Suppose we estimate the following utility model describing preferences for chocolate bars between two groups: A &amp; B

$$
\tilde{u}_j = \beta_1 x_j^{\mathrm{price}} + \beta_2 x_j^{\mathrm{caco}} + \beta_3 x_j^{\mathrm{price}}\delta_j^{\mathrm{B}} + \beta_4 x_j^{\mathrm{cacao}}\delta_j^{\mathrm{B}} + \varepsilon_j
$$

.leftcol55[

The estimated model produces the following coefficients and hessian:

`\(\beta\)` = [-0.7, 0.1, 0.2, 0.8]

$$
H =
`\begin{bmatrix}
-6000 &amp; 50 &amp; 60 &amp; 70
\\
50 &amp; -700 &amp; 50 &amp; 100
\\
60 &amp; 50 &amp; -300 &amp; 20
\\
70 &amp; 100 &amp; 20 &amp; -6000
\end{bmatrix}`
$$

]

.rightcol45[

a) Use the `mvrnorm()` function from the `MASS` library to generate 10,000 draws of the model coefficients.

b) Use the draws to compute the mean WTP and 95% confidence intervals of the effects of `\(x_j^{\mathrm{price}}\)` and `\(x_j^{\mathrm{cacao}}\)` for each group (A &amp; B).

]

---

# .center[Estimating mixed logit models with `logitr`]

&lt;br&gt;

## 1. Open `logitr-cars`

## 2. Open `code/8.2-model-mnl-groups.R`

---

class: inverse

<div class="countdown" id="timer_637403ec" style="top:0;right:0;font-size:2em;" data-warnwhen="15">
<code class="countdown-time"><span class="countdown-digits minutes">20</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

## Your Turn

### Do this individually, and compare with your teammates:

.leftcol80[.font120[

- Examine the demographic and other variables in your pilot data and specify a model that estimates differences between different groups.
- Write code to estimate that model (or multiple models, e.g. WTP space models).
- Compute and compare WTP across the different groups.

]]
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
